FreeMedForms

./sdk.py -d monkey/sdk -s monkey/src/pluginsmanager

statistique du site : ericmaeker (6)


ChangeLog
=========


Web Changelog
=============
dynamic forms removing
first version of drugs widget selector, and interactor checker (drugs database based on afssaps datas from december 2008)
stand alone drugs interactions tester
MacOs universal binary release
command line interpretor for application parameters defining
first user identification


TODO
====
mfDrugsWidget : gestion des qApp properties et sauvegarde dans le settings de fmf.
mfGlobal : gérer les filters pour QFileDialog
mfIOInterface : ajouter filters() 
option = numeric pour les shorttext par exemple

mfObject :
	m_Scriptor √  effacer quand on recharge un formulaire.

Tags
	license
	medicalsource


Interfa√ßage avec d'autres applis
	retourne l'interpr√©tation du formulaire dans un fichier temporaire

Formulaires √  pr√©parer
	ADL
	MMS
	BEC96
	Horloge
	5 Mots

Plugins
	CIM10
	Drug db
	PDF reader
	HTML reader


Drugs DB :
	PECH  = prise en charge particuli√®re
	
http://afssaps-prd.afssaps.fr/php/ecodex/telecharger/fic_cis_cip.zip
http://www.codage.ext.cnamts.fr/f_mediam/fo/bdm/AFM.EXE
http://www.codage.ext.cnamts.fr/f_mediam/fo/bdm/INTER.EXE


COMMANDES SQL :
===============

USE drugs;

--
--  MODIFICATION DE LA TABLE CIS
--

-- cr√©er une table FORMES √  partir de CIS :
 CREATE TABLE `FORMES` (
`ID_FORME` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
`FORME` VARCHAR( 100 ) NOT NULL ,
PRIMARY KEY ( `ID_FORME` )
) ENGINE = MYISAM ;
-- mettre toutes les formes diff√©rentes dans la table
ALTER TABLE `CIS` ADD `ID_FORME` INT NOT NULL DEFAULT '-1' AFTER `FORME`;
INSERT INTO `FORMES` (`FORME`) SELECT DISTINCT FORME FROM `CIS` ORDER BY FORME ASC;
-- remplacer dans la table initiale les formes avec leur id
UPDATE `CIS` SET `ID_FORME`= ( SELECT `ID_FORME` FROM `FORMES` WHERE `FORMES`.`FORME`=`CIS`.`FORME` );


-- cr√©er une table ADMINISTRATION √  partir de CIS :
 CREATE TABLE `ADMINISTRATION` (
`ID_ADMINISTRATION` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
`ADMINISTRATION` VARCHAR( 100 ) NOT NULL ,
PRIMARY KEY ( `ID_ADMINISTRATION` )
) ENGINE = MYISAM ;
-- mettre toutes les ADMINISTRATIONs diff√©rentes dans la table
ALTER TABLE `CIS` ADD `ID_ADMINISTRATION` INT NOT NULL DEFAULT '-1' AFTER `ADMINISTRATION`;
INSERT INTO `ADMINISTRATION` (`ADMINISTRATION`) SELECT DISTINCT ADMINISTRATION FROM `CIS` ORDER BY ADMINISTRATION ASC;
-- remplacer dans la table initiale les formes avec leur id
UPDATE `CIS` SET `ID_ADMINISTRATION`= ( SELECT `ID_ADMINISTRATION` FROM `ADMINISTRATION` WHERE `ADMINISTRATION`.`ADMINISTRATION`=`CIS`.`ADMINISTRATION` );

-- cr√©er une table SUBSTANCES √  partir de CIS :
CREATE TABLE `SUBSTANCES` (
`ID_SUBST` INT UNSIGNED  ,
`DENOMINATION` VARCHAR( 100 ) ,
) ENGINE = MYISAM ;
-- mettre toutes les SUBSTANCES diff√©rentes dans la table
INSERT INTO `SUBSTANCES` ( `ID_SUBST`, `DENOMINATION` )
SELECT DISTINCT `CODE_SUBST`, `DENOMINATION`
FROM `COMPO`
ORDER BY `CODE_SUBST` ASC;


--
-- Structure de la table `CIP` bas√©e sur table CPAM
--
CREATE TABLE IF NOT EXISTS `CIP` (
  `CIP` int(11) NOT NULL,
  `CIP_UCD` int(11) NOT NULL,
  `NOM_COURT` varchar(113) NOT NULL,
  `NOM_LONG1` varchar(114) NOT NULL,
  `DOSAGE_SA` varchar(17) NOT NULL,
  `UNITE_SA` varchar(17) NOT NULL,
  `NB_UNITES` varchar(10) NOT NULL,
  `CODE_ATC` varchar(10) NOT NULL,
  `CLASSE_ATC` varchar(77) NOT NULL,
  `CODE_EPH` varchar(10) NOT NULL,
  `CLASSE_EPH` varchar(77) NOT NULL,
  `LABO` varchar(30) NOT NULL,
  `SEUIL_ALER` int(11) NOT NULL,
  `SEUIL_REJE` int(11) NOT NULL,
  `DEBUT_REMB` date NOT NULL,
  `FIN_REMB` date NOT NULL,
  `CODE_LISTE` int(11) NOT NULL,
  `LISTCONV` varchar(1) NOT NULL,
  `PRESC_REST` varchar(1) NOT NULL,
  `EXCEPTION` varchar(1) NOT NULL,
  `PIH` varchar(2) NOT NULL,
  `PECP` varchar(2) NOT NULL
) ENGINE=MyISAM;
INSERT INTO `CIP` (`CIP`,`CIP_UCD`,`NOM_COURT`,`NOM_LONG1`,`DOSAGE_SA`,`UNITE_SA`,`NB_UNITES`,`CODE_ATC`,`CLASSE_ATC`,`CODE_EPH`,`CLASSE_EPH`,`LABO`,`SEUIL_ALER`,`SEUIL_REJE`,`DEBUT_REMB`,`FIN_REMB`,`CODE_LISTE`,`LISTCONV`,`PRESC_REST`,`EXCEPTION`,`PIH`,`PECP`) SELECT `CIP`,`CIP_UCD`,`NOM_COURT`,`NOM_LONG1`,`DOSAGE_SA`,`UNITE_SA`,`NB_UNITES`,`CODE_ATC`,`CLASSE_ATC`,`CODE_EPH`,`CLASSE_EPH`,`LABO`,`SEUIL_ALER`,`SEUIL_REJE`,`DEBUT_REMB`,`FIN_REMB`,`CODE_LISTE`,`LISTCONV`,`PRESC_REST`,`EXCEPTION`,`PIH`,`PECP` FROM `CPAM`;


-- -----------------------------------
--  IAM
-- -----------------------------------
     // TYPE IAM :
     // 1 = Pr√©caution d'emploi
     // 10 = A prendre en compte
     // 100 = Association DECONSEILLEE
     // 1000 = CONTRE-INDICATION

-- -----------------------------------
--  CIS
-- -----------------------------------
     // AUTORISATION :
     // N	
     // C	
     // R	
     // D	
     // I	

code liste
0¬ : NON RENSEIGNE OU NON CONCERNE
1 : LISTE I
2 : LISTE II
3 : STUPEFIANT
4 : HORS LISTE
9 : PSYCHOTROPE

-- AMM
AMM active		A
AMM abrog√©e		B
AMM retir√©e		R
AMM supendue	S
AMM archiv√©e		Z

-- CIS.AUTORISATION
Proc√©dure nationale				N
Proc√©dure centralis√©e				C
Proc√©dure de reconnaissance mutuelle	R
Proc√©dure d√©centralis√©e				D
Autorisation d'importation parall√®le	I


SELECT DISTINCT CIS. *
FROM CIS
LEFT JOIN COMPO ON CIS.CIS = COMPO.CIS
LEFT JOIN IAM_SUBST_L_CODE_SUBST ON COMPO.CODE_SUBST = IAM_SUBST_L_CODE_SUBST.ID_CODE_SUBST
LEFT JOIN IAM_DENOMINATION ON IAM_SUBST_L_CODE_SUBST.ID_IAM_SUBST = IAM_DENOMINATION.ID_DENOMINATION
WHERE IAM_DENOMINATION.DENOMINATION LIKE 'acebu%'
LIMIT 0 , 30 
